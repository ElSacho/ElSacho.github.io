<!DOCTYPE html>
<html lang="en">

  <!-- Head -->
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">    <!-- Metadata, OpenGraph and Schema.org -->
    

    <!-- Standard metadata -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>The Orient Express 3D World | Sacha  Braun</title>
    <meta name="author" content="Sacha  Braun">
    <meta name="description" content="Creating a 3D space for an Orient Express">
    <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website">


    <!-- Bootstrap & MDB -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous">

    <!-- Bootstrap Table -->
    <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css">

    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

    <!-- Code Syntax Highlighting -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light">

    

    <!-- Styles -->
    
    <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;">
    
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="canonical" href="https://elsacho.github.io/projects/3_project/">

    <!-- Dark Mode -->
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark">

    <script src="/assets/js/theme.js"></script>
    <script src="/assets/js/dark_mode.js"></script>
    

  </head>

  <!-- Body -->
  <body class="fixed-top-nav ">

    <!-- Header -->
    <header>

      <!-- Nav Bar -->
      <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
        <div class="container">
          <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Sacha </span>Braun</a>
          <!-- Navbar Toggle -->
          <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar top-bar"></span>
            <span class="icon-bar middle-bar"></span>
            <span class="icon-bar bottom-bar"></span>
          </button>

          <div class="collapse navbar-collapse text-right" id="navbarNav">
            <ul class="navbar-nav ml-auto flex-nowrap">

              <!-- About -->
              <li class="nav-item ">
                <a class="nav-link" href="/">About</a>
              </li>
              

              <!-- Other pages -->
              <li class="nav-item ">
                <a class="nav-link" href="/projects/">Projects</a>
              </li>
              <li class="nav-item ">
                <a class="nav-link" href="/cv/">CV</a>
              </li>
              <li class="nav-item ">
                <a class="nav-link" href="/teaching/">Teaching</a>
              </li>

              <!-- Toogle theme mode -->
              <li class="toggle-container">
                <button id="light-toggle" title="Change theme">
                  <i class="fas fa-moon"></i>
                  <i class="fas fa-sun"></i>
                </button>
              </li>
            </ul>
          </div>
        </div>
      </nav>

      <!-- Scrolling Progress Bar -->
      <progress id="progress" value="0">
        <div class="progress-container">
          <span class="progress-bar"></span>
        </div>
      </progress>
    </header>


    <!-- Content -->
    <div class="container mt-5">
      
        <!-- page.html -->
        <div class="post">

          <header class="post-header">
            <h1 class="post-title">The Orient Express 3D World</h1>
            <p class="post-description">Creating a 3D space for an Orient Express</p>
          </header>

          <article>
            <h1 id="orient-express-project">Orient Express Project</h1>

<div class="repo p-2 text-center">
  <a href="https://github.com/ElSacho/3D-Word" rel="external nofollow noopener" target="_blank">
    <img class="repo-img-dark w-100" alt="Orient Express World" src="https://github-readme-stats.vercel.app/api/pin/?username=ElSacho&amp;repo=3D-Word&amp;theme=dark&amp;show_owner=">
  </a>
</div>

<h2 id="compilation-instructions">Compilation Instructions</h2>

<p>The project is written in C++ and uses the CGP library. Detailed steps for compiling this project can be found on the CGP website’s compilation guide. Please follow the guide to ensure the proper setup of your project.</p>

<p>Visit the link below for comprehensive instructions:</p>

<p><a href="https://imagecomputing.net/cgp/compilation/content/01_compilation/index.html" rel="external nofollow noopener" target="_blank">CGP Compilation Guide</a></p>

<p>This guide provides step-by-step instructions on how to set up your environment and compile C++ projects using the CGP library. Be sure to follow all the steps outlined in the guide to successfully compile and run this project.</p>

<p>Should you encounter any issues during the compilation process, please refer back to the guide, as it covers common issues and their solutions.</p>

<p>Train animation is generative: the initial speed is given as input, and everything is updated as a function of accumulated speed and terrain gradient.</p>

<h2 id="original-idea">Original Idea</h2>

<p>Our project aims to present a scene featuring the legendary Orient Express, traveling through a snowy, mountainous landscape.</p>

<p>You can see your video showing our project <a href="https://youtu.be/NXIq5WTZQdE" rel="external nofollow noopener" target="_blank">here</a></p>

<h2 id="landscape">Landscape</h2>

<p>We began our scene modeling with the mountainous landscape. To achieve this, we surrounded our scene with a skybox displaying a mountainous backdrop. Due to the mediocre quality of freely available skyboxes on the internet, we decided to consider only the vertical planes (4 faces), replicating the same image for each. The drawback lies in “anomalies” at the junction of two faces, showing a perfectly symmetrical landscape.</p>

<p>For the terrain itself, we created a 400 by 400 grid, to which we then applied Perlin noise with empirically derived parameters to replicate the mountainous landscape as accurately as possible. We added a 2D mountain texture (rocks and snow) from an image found on the internet. Although the image quality was a primary criterion in our texture choice, it does not make the terrain appear realistic enough when zoomed in too closely.</p>

<p>We decided to enhance the scene by adding an ice lake and details like igloos, a fisherman, and flies. The lake is a plan at z = constant, on which we added a 2D ice texture, and that cuts through the Perlin noise of the mountains.</p>

<h3 id="details">Details</h3>

<h4 id="igloos">Igloos</h4>
<p>For the igloos, we created a specific mesh (a deformed sphere), applied a suitable texture, and randomly distributed them on the lake (without detecting potential contacts or penetrations between two igloos). The shapes of the igloos are quite random, as the radius and deformation of the sphere, as well as the height and size of the door, are generated randomly.</p>

<h4 id="fisherman">Fisherman</h4>
<p>For the fisherman, we first created a hole in the lake, modeled by a hollow disc where the center of the disc is slightly raised, giving the illusion of a hole. The fisherman is located at the edge of the hole, with his arm animated descriptively. The fishing line held in his hand is animated by a generator movement: we chose an extendable thread model (mass-spring system), and we constrain the movement of the top point to match the fisherman’s hand. The extendable nature of the line does not harm realism since the viewer does not see the lower end of the line.</p>

<h4 id="flies">Flies</h4>
<p>The flies around the fisherman are animated by a boyds movement: a “leader” fly follows a circular trajectory around the fishing hole, and the other flies tend to approach or move away based on their distance from it.</p>

<h4 id="snow">Snow</h4>
<p>For falling snow, we initially opted for flakes modeled by white spheres, to which we assigned a mass, subjected to gravitational forces and the viscous drag force of the air. This choice posed two major problems: first, it required the management of a large number of spheres simultaneously, which affected the visual rendering of the scene, making it jerky; second, realism was lost with the assimilation of flakes to simple white spheres, especially for those falling near the camera.</p>

<p>Therefore, we chose to represent the flakes with billboards, which solves both previously stated problems. We animated these billboards with uniform motion (constant speed) from a random position taken at a fixed altitude. Indeed, it seemed to us that the acceleration of the flakes during their fall was not an important detail for the realism of the scene. Below a certain altitude (once the snowflake has passed the zero level of the scene), we remove it from the list of “active” flakes to prevent the algorithm from diverging, having to manage too many flakes.</p>

<h2 id="train">Train</h2>

<p>For the train, we modeled a locomotive and some wagons (we displayed 6 in our project, but more can easily be shown). To animate the train, we placed trajectory control points on our terrain. We then interpolated these points with a spline curve to describe the trajectory. Given the mountainous terrain, the trajectory is 3D in space and cannot be restricted to a plane, which created problems for train rotations.</p>

<p>The train animation is generative. We indicate an acceleration and an initial speed, and the train then moves on its own. The speed can increase or even decrease depending on the slope. Thus, the train’s acceleration and speed depend on the terrain and the previous speed. The idea of the code is as follows:</p>

<p>Based on previous data and the terrain, we update the acceleration, then the speed, to calculate the distance covered. We calculate the position through interpolation at this distance and update the position of the locomotive. Thanks to the derivative of the interpolation curve, we can update the rotation along the y-axis. We had issues related to abrupt changes in the sign of this angle, so we coded a system preventing abrupt angle changes. This method works far less well for the rotation that allows the train to follow the curve. For that, we used the height difference between two successive positions.</p>

<p>The distance used is the actual theoretical distance covered by the train and not the “t” parameter of the initial interpolation code seen in class in a real covered distance. The interest is threefold:</p>

<p>Maintaining consistent speed: Even if two control points are very close or far apart, the train goes at the same speed on the sections. The train’s speed does not depend on the gap between control points.
Coding the movement of the wagons. To keep consistency in the train movement, we required the wagons to always be spaced at the same real distance. Thus, the wagon movements are always at the same distance from the train.
Rotating the wheels with some consistency. The wheel rotation speed depends on the real speed.
The wheel rotation speed is particularly important in our project since we modeled a piston for the locomotive. All pieces of the piston wheel have been modeled in “hard” code and are available in the “model_texture” file. The piston drives the wheels, and the wheels turn according to the piston… at least theoretically, because in reality the piston movement is descriptive. We have equated the piston positions based on the wheel rotation.</p>

<p>Finally, for the train to move, it must have rails! To do this, we created a mesh, also with “hard” OpenGL code. We provide the train’s trajectory and go through it step by step. At each step, we add four points to form a square and, at the end of the process, obtain a giant, very thin rectangle. We duplicate the mesh and finally add a steel texture on top. Then we proceed similarly to gradually add wooden boards between the rails and stilts to support the structure.</p>

<h2 id="conclusion">Conclusion</h2>

<p>In conclusion, this project was an interesting journey through the challenges of 3D animation. Through our attempts to render a realistic Orient Express traveling through a snowy, mountainous landscape, we were able to delve deeper into the complexities of 3D modeling, texturing, and animation. Although certain aspects posed difficulties, such as train rotations and the rendering of falling snow, the solutions we found, like using billboards for the snowflakes and a generative animation for the train, have provided valuable insights into the world of computer graphics. The project has been a valuable learning experience, offering us the chance to put theory into practice.</p>


          </article>

        </div>

      
    </div>

    <!-- Footer -->    
    <footer class="fixed-bottom">
      <div class="container mt-0">
        © Copyright 2023 Sacha  Braun. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>.

      </div>
    </footer>

    <!-- JavaScripts -->
    <!-- jQuery -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <!-- Bootsrap & MDB scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script>

    <!-- Masonry & imagesLoaded -->
  <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
  <script defer src="/assets/js/masonry.js" type="text/javascript"></script>
    
  <!-- Medium Zoom JS -->
  <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script>
  <script defer src="/assets/js/zoom.js"></script>

  <!-- Bootstrap Table -->
  <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script>

  <!-- Load Common JS -->
  <script src="/assets/js/no_defer.js"></script>
  <script defer src="/assets/js/common.js"></script>
  <script defer src="/assets/js/copy_code.js" type="text/javascript"></script>

    
  <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script>
  <script async src="https://badge.dimensions.ai/badge.js"></script>

    <!-- MathJax -->
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        tags: 'ams'
      }
    };
  </script>
  <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script>
  <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>

    
    

<!-- Scrolling Progress Bar -->
<script type="text/javascript">
  /*
   * This JavaScript code has been adapted from the article 
   * https://css-tricks.com/reading-position-indicator/ authored by Pankaj Parashar, 
   * published on the website https://css-tricks.com on the 7th of May, 2014.
   * Couple of changes were made to the original code to make it compatible 
   * with the `al-foio` theme.
   */
  const progressBar = $("#progress");
  /*
   * We set up the bar after all elements are done loading.
   * In some cases, if the images in the page are larger than the intended
   * size they'll have on the page, they'll be resized via CSS to accomodate
   * the desired size. This mistake, however, breaks the computations as the
   * scroll size is computed as soon as the elements finish loading.
   * To account for this, a minimal delay was introduced before computing the
   * values.
   */
  window.onload = function () {
    setTimeout(progressBarSetup, 50);
  };
  /*
   * We set up the bar according to the browser.
   * If the browser supports the progress element we use that.
   * Otherwise, we resize the bar thru CSS styling
   */
  function progressBarSetup() {
    if ("max" in document.createElement("progress")) {
      initializeProgressElement();
      $(document).on("scroll", function() {
        progressBar.attr({ value: getCurrentScrollPosition() });
      });
      $(window).on("resize", initializeProgressElement);
    } else {
      resizeProgressBar();
      $(document).on("scroll", resizeProgressBar);
      $(window).on("resize", resizeProgressBar);
    }
  }
  /*
   * The vertical scroll position is the same as the number of pixels that
   * are hidden from view above the scrollable area. Thus, a value > 0 is
   * how much the user has scrolled from the top
   */
  function getCurrentScrollPosition() {
    return $(window).scrollTop();
  }

  function initializeProgressElement() {
    let navbarHeight = $("#navbar").outerHeight(true);
    $("body").css({ "padding-top": navbarHeight });
    $("progress-container").css({ "padding-top": navbarHeight });
    progressBar.css({ top: navbarHeight });
    progressBar.attr({
      max: getDistanceToScroll(),
      value: getCurrentScrollPosition(),
    });
  }
  /*
   * The offset between the html document height and the browser viewport
   * height will be greater than zero if vertical scroll is possible.
   * This is the distance the user can scroll
   */
  function getDistanceToScroll() {
    return $(document).height() - $(window).height();
  }

  function resizeProgressBar() {
    progressBar.css({ width: getWidthPercentage() + "%" });
  }
  // The scroll ratio equals the percentage to resize the bar
  function getWidthPercentage() {
    return (getCurrentScrollPosition() / getDistanceToScroll()) * 100;
  }
</script>

  </body>
</html>
